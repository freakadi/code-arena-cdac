# ============================================================================
# CODEARENA BACKEND APPLICATION CONFIGURATION
# ============================================================================

# ============================================================================
# 1. APPLICATION INFORMATION
# ============================================================================
spring.application.name=CodeArena Backend
app.name=CodeArena
app.version=1.0.0
server.port=8080
server.servlet.context-path=/

# ============================================================================
# 2. DATABASE CONFIGURATION
# ============================================================================
# MySQL Database
spring.datasource.url=jdbc:mysql://localhost:3306/codearena?createDatabaseIfNotExist=true&allowPublicKeyRetrieval=true&useSSL=false
spring.datasource.username=root
  spring.datasource.password=admin123
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA/Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.datasource.initialization-mode=always
spring.batch.jdbc.initialize-schema=ALWAYS
spring.sql.init.mode=always
spring.jpa.defer-datasource-initialization=true

#spring.ai.ollama.base-url=http://localhost:11434
#spring.ai.ollama.model=llama3
#spring.autoconfigure.exclude=org.springframework.ai.autoconfigure.ollama.OllamaAutoConfiguration


#spring.ai.google.genai.api-key=${GEMINI_API_KEY}
#spring.ai.model.chat=google-genai
#spring.ai.google.genai.chat.options.model=gemini-1.0-pro
#spring.ai.google.genai.chat.options.temperature=0.2


#spring.ai.chat.options.temperature=0.2

# ---- GROQ CONFIG ----
spring.ai.openai.api-key=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
spring.ai.openai.base-url=https://api.groq.com/openai
spring.ai.openai.chat.options.model=llama-3.3-70b-versatile
spring.ai.openai.chat.options.temperature=0.2


spring.batch.job.enabled=false

# ============================================================================
# 3. REDIS CONFIGURATION (for caching, OTP, sessions)
# ============================================================================
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.timeout=60000
spring.data.redis.jedis.pool.max-active=8
spring.data.redis.jedis.pool.max-idle=8
spring.data.redis.jedis.pool.min-idle=0

# ============================================================================
# 4. EMAIL CONFIGURATION
# ============================================================================
# SMTP Settings
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=itzzadi45@gmail.com
spring.mail.password=hjyrhibxhgiqiyzy

# SMTP Properties
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Email Templates
email.invitation.expiry.hours=24
email.use.html=true

# ============================================================================
# 5. JWT AUTHENTICATION CONFIGURATION
# ============================================================================
jwt.token.validity=86400000
jwt.issuer=CodeArenaApp
jwt.secret=c2VjcmV0LWtleS1mb3Itand0LXRva2VuLWdlbmVyYXRpb24tMTIzNDU2Nzg5MA==
jwt.validity=86400000

# ============================================================================
# 6. OTP CONFIGURATION
# ============================================================================
otp.expiry.minutes=5
otp.length=6
otp.rate.limit.minutes=2

# ============================================================================
# 7. ROOM CONFIGURATION
# ============================================================================
room.code.min=100000
room.code.max=999999
room.code.generation.max-attempts=10
room.max.questions=20
room.min.questions=1
room.max.duration=180
room.min.duration=5
room.default.duration=30
room.expiry.check.interval=60000

# ============================================================================
# 8. PRACTICE SESSION CONFIGURATION
# ============================================================================
practice.session.prefix=PRACTICE-
practice.max.questions=50
practice.min.questions=1
practice.max.time.minutes=180
practice.min.time.minutes=1
practice.default.difficulty=MEDIUM

# ============================================================================
# 9. SUBMISSION CONFIGURATION
# ============================================================================
submission.max.code.length=10000
submission.max.attempts.per-question=3
submission.timeout.seconds=30

# ============================================================================
# 10. CODE EXECUTION CONFIGURATION
# ============================================================================
# Judge0 (alternative code execution)
judge0.api.url=http://localhost:2358

# Piston API
code.execution.piston.url=https://emkc.org/api/v2/piston/execute
code.execution.timeout.seconds=10
code.execution.max.memory.mb=256

# Language Versions
code.execution.python.version=3.10.0
code.execution.java.version=15.0.2
code.execution.cpp.version=10.2.0
code.execution.c.version=10.2.0
code.execution.javascript.version=18.15.0

# ============================================================================
# 11. QUESTION CONFIGURATION
# ============================================================================
# General Question Settings
question.max.title.length=200
question.max.description.length=5000
question.max.points=100
question.min.points=1
question.default.points=10

# MCQ Configuration
mcq.max.options=6
mcq.min.options=2
mcq.max.option.length=500

# Coding Question Configuration
coding.max.test.cases=20
coding.min.test.cases=1
coding.max.time.limit=10.0
coding.max.memory.limit=512.0

# ============================================================================
# 12. CHAT CONFIGURATION
# ============================================================================
chat.message.max.length=1000
chat.message.min.length=1
chat.cleanup.days=1
chat.cleanup.cron=0 0 2 * * ?

# ============================================================================
# 13. FRONTEND & CORS CONFIGURATION
# ============================================================================
app.frontend.url=${FRONTEND_URL:http://localhost:5173}
app.cors.allowed-origins=${CORS_ORIGINS:http://localhost:5173,http://localhost:5174,http://localhost:8080,http://127.0.0.1:5500}

# ============================================================================
# 14. AI CONFIGURATION (OpenAI - Fast & Reliable)
# ============================================================================
# OpenAI AI Integration (Fast - 1-3 second responses)
#spring.ai.openai.api-key=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
#spring.ai.openai.chat.options.model=gpt-3.5-turbo
#spring.ai.openai.chat.options.temperature=0.7
#spring.ai.openai.chat.options.max-tokens=150

# AI Service Configuration
ai.service.provider=openai
ai.service.timeout.seconds=10
ai.service.max.retries=2
ai.fallback.enabled=true

# Ollama (Backup - Disabled)
# spring.ai.ollama.base-url=http://localhost:11434
# spring.ai.ollama.model=llama3

# ============================================================================
# 15. VALIDATION CONFIGURATION
# ============================================================================
validation.email.pattern=^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$
validation.password.min.length=6
validation.username.min.length=3
validation.username.max.length=50

# ============================================================================
# 16. SECURITY & RATE LIMITING CONFIGURATION
# ============================================================================
security.rate.limit.enabled=true
security.rate.limit.max.requests=100
security.rate.limit.window.minutes=1

# ============================================================================
# 17. FILE UPLOAD CONFIGURATION
# ============================================================================
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ============================================================================
# 18. LOGGING CONFIGURATION
# ============================================================================
logging.level.root=INFO
logging.level.com.codearena.backend=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ============================================================================
# 19. MONITORING & ACTUATOR CONFIGURATION
# ============================================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized

# ============================================================================
# 20. DEVELOPMENT TOOLS CONFIGURATION
# ============================================================================
spring.devtools.restart.enabled=true
project.dev=chouhanansu@gmail.com
spring.flyway.enabled=false

# ============================================================================
# 21. ROOM INVITATION CONFIGURATION
# ============================================================================
app.invitation.expiry-hours=24
app.invitation.use-html-emails=true